Version 1
SubGoalCombiner SGC_AND
INITSECTION
//Barbarian
DB_ClearStatusOnShortRest("FATIGUED_RAGE");
//Bard
DB_ClearStatusOnShortRest("COURAGE_LINGER_AURA");
DB_ClearStatusOnShortRest("CourageForteAura2");
DB_ClearStatusOnShortRest("CourageForteAura3");
DB_ClearStatusOnShortRest("SongOfStrengthLingering");
DB_ClearStatusOnShortRest("StrengthForteAura2");
DB_ClearStatusOnShortRest("StrengthForteAura3");
DB_ClearStatusOnShortRest("RallyingLingering");
DB_ClearStatusOnShortRest("RallyingForteAura2");
DB_ClearStatusOnShortRest("RallyingForteAura3");
DB_ClearStatusOnShortRest("DIRGE_OF_DOOM");
DB_ClearStatusOnShortRest("TRIPLE_TIME_LINGERING");
//Champion
DB_ClearStatusOnShortRest("SpiritShields"); //Can be extended to 1 minute with the Security feat
//Cleric
DB_ClearStatusOnShortRest("HealersBlessingStatus");
DB_ClearStatusOnShortRest("VibrantThornsStatus");
DB_ClearStatusOnShortRest("WeaponSurgeStatus");
DB_ClearStatusOnShortRest("MOON_NEW");
DB_ClearStatusOnShortRest("MOON_WAX");
DB_ClearStatusOnShortRest("MOON_FULL");
DB_ClearStatusOnShortRest("MOON_WANE");
DB_ClearStatusOnShortRest("PROTECTOR_SPHERE_AURA");
//Druid
DB_ClearStatusOnShortRest("WILDSHAPE_CAT_PLAYER");
DB_ClearStatusOnShortRest("WILDSHAPE_BADGER_PLAYER");
DB_ClearStatusOnShortRest("WILDSHAPE_SPIDER_GIANT_PLAYER");
DB_ClearStatusOnShortRest("WILDSHAPE_WOLF_DIRE_PLAYER");
//Ranger
DB_ClearStatusOnShortRest("GRAVITY_WEAPON");
DB_ClearStatusOnShortRest("MAGICHIDE");
DB_ClearStatusOnShortRest("ENLARGE");
DB_ClearStatusOnShortRest("AnimalClawsStatus");
DB_ClearStatusOnShortRest("AnimalJawsStatus");
DB_ClearStatusOnShortRest("AnimalOwlEyesStatus");
DB_ClearStatusOnShortRest("AnimalWingsStatus");
DB_ClearStatusOnShortRest("WarningStripesStatus");
//Sorcerer
DB_ClearStatusOnShortRest("TentacularLimbsStatus");
DB_ClearStatusOnShortRest("AngelicHaloStatus");
DB_ClearStatusOnShortRest("UndeathsBlessing");
DB_ClearStatusOnShortRest("UndeathsBlessingSuccess");
DB_ClearStatusOnShortRest("BloodMagicSelf");
DB_ClearStatusOnShortRest("EMBRACE_THE_PIT_1");
DB_ClearStatusOnShortRest("EMBRACE_THE_PIT_2");
//Wizard
DB_ClearStatusOnShortRest("ShiftersSpeed");
DB_ClearStatusOnShortRest("ShiftersClimb");
DB_ClearStatusOnShortRest("ShiftersBite");
DB_ClearStatusOnShortRest("CommunityRestoration");
DB_ClearStatusOnShortRest("SpiralRecast");
DB_ClearStatusOnShortRest("CommunityRestoration");
DB_ClearStatusOnShortRest("INVISIBILITY");
DB_ClearStatusOnShortRest("SEE_INVISIBILITY");
//Non-sustained auras
DB_ClearStatusOnShortRest("AshCloudAura_Rank2");
DB_ClearStatusOnShortRest("AshCloudAura_Rank3");
DB_ClearStatusOnShortRest("AshCloudAura_Rank4");
DB_ClearStatusOnShortRest("AshCloudAura_Rank5");
DB_ClearStatusOnShortRest("AshCloudAura_Rank6");
DB_ClearStatusOnShortRest("PetalStorm_Aura_Rank4");
DB_ClearStatusOnShortRest("PetalStorm_Aura_Rank6");
DB_ClearStatusOnShortRest("RustCloudAura_Rank4");
DB_ClearStatusOnShortRest("RustCloudAura_Rank6");
DB_ClearStatusOnShortRest("ToxicCloudAura_Rank5");
DB_ClearStatusOnShortRest("ToxicCloudAura_Rank6");
DB_ClearStatusOnShortRest("SCATTER_SCREE");
//Extended spell statuses
DB_ClearStatusOnShortRest("SHIELD_SPELL_BROKEN");
DB_ClearStatusOnShortRest("THAUMATURGY");
DB_ClearStatusOnShortRest("STONESKIN");
DB_ClearStatusOnShortRest("STONESKIN_6");
DB_ClearStatusOnShortRest("SANDFORM");
DB_ClearStatusOnShortRest("SANDFORM_5");
DB_ClearStatusOnShortRest("FREEDOM_OF_MOVEMENT");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Acid_Rank2");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Cold_Rank2");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Lightning_Rank2");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Fire_Rank2");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Thunder_Rank2");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Acid_Rank4");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Cold_Rank4");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Lightning_Rank4");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Fire_Rank4");
DB_ClearStatusOnShortRest("ResistEnergyStatus_Thunder_Rank4");
//Focus spell disguises
DB_ClearStatusOnShortRest("DISGUISE_SELF_HUMAN_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HUMAN_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HUMAN_STRONG_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HUMAN_STRONG_");
DB_ClearStatusOnShortRest("DISGUISE_SELF_ELF_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_ELF_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_ELF_STRONG_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_ELF_STRONG_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DROW_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DROW_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DROW_STRONG_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DROW_STRONG_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFELF_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFELF_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFELF_STRONG_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFELF_STRONG_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_TIEFLING_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_TIEFLING_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_TIEFLING_STRONG_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_TIEFLING_STRONG_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DRAGONBORN_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DRAGONBORN_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DWARF_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_DWARF_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_GITHYANKI_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_GITHYANKI_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_GNOME_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_GNOME_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFLING_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFLING_MALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFORC_FEMALE");
DB_ClearStatusOnShortRest("DISGUISE_SELF_HALFORC_MALE");

// Scrolls: A
/*DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_AcidArrow_0fa4bdab-9ef1-4575-b063-b3e9d359d593);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Aid_3e85f140-2284-430b-b11f-2126cd85b567);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_AnimalFriendship_3d992632-dc98-43b1-85e5-b59ba5a6aa9a);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_AnimateDead_8b9b4657-93f3-4382-b6e0-a587902abcba);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ArcaneEye_DONOTUSE_5314d1eb-5771-47b5-80a7-2ee093ef4618);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ArcaneLock_05da1a09-2d22-4299-b4a0-c4538a91f91c);

// Scrolls: B
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Banishment_82719943-71e0-4eb2-bc4f-c8c0dd02c47c);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_BestowCurse_48fbab09-ede1-4093-9223-38c9e172c061);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_BlackTentacles_e9fae419-8c7a-4d5d-950f-94675a2aff07);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Blight_e0ee9263-3740-44fe-80da-4315cb836aef);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Blindness_2c6caac0-1684-4324-abba-0b849a9add74);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Blink_d3800e05-635f-47b3-80b1-1a7c4161cf89);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Blur_a8b34fd5-d643-49ad-98d3-d5841492b338);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_BurningHands_bc00df72-3c98-4bf2-9650-28e08f79b57c);

// Scrolls: C
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ChainLightning_13105f7d-55fa-4292-abfe-b9d80054b48e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_CharmPerson_2315f935-a188-4665-9ae0-986c7a9b0021);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ChillTouch_79faf049-d503-46eb-a018-69e1975777d7);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ChromaticOrb_c6aef37e-bc4d-46e7-a963-15b4cd8163bd);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ChromaticOrb_d338fcb9-aaf5-48b1-8333-2dd4d9f70e1b);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_CircleOfDeath_ad31110a-aa9a-4427-925a-9952bfbef45a);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Cloudkill_0e793d2d-1cd7-4b90-a71b-821423e50969);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_CloudOfDaggers_33421d4f-1cac-4196-a85e-0b07bcb3ecf2);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ColorSpray_c7c92bc3-e856-4403-b509-9b0491f455cd);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ConeOfCold_e81e7b31-8e7a-4fc1-977d-9a9a58fdd4a0);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Confusion_7634cc33-d16b-4640-ba7c-8c6a26653591);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ConjureElemental_c0e92dfa-29cf-46e8-8b35-8bded679df64);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ConjureMinorElemental_a30864e5-06f0-4d14-9ea4-cb6870c0ddfe);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Counterspell_DONOTUSE_17f828a4-5684-42dd-9f08-ff99ba43358a);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_CrownOfMadness_701a7df0-728e-494a-ab2f-146aed4e8c7f);

// Scrolls: D
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Darkness_caa812b9-9362-4c38-aef0-e3f6eb288dba);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Darkvision_0d737a55-c337-4e8f-b31f-a17273099013);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_DetectThoughts_126cc673-1151-4113-b1bf-98457233441b);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_DimensionDoor_75452ba5-5758-417c-b661-8832eb64df66);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_DisguiseSelf_b3376ca4-393c-4191-aa67-a02c94d6a236);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Disintegrate_3f737706-57ca-45e6-b0d1-45238da76329);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_DispelMagic_DONOTUSE_bc5c0bcf-144f-46ed-bcde-e6bd1225efb9);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_DominatePerson_3b447e07-3e73-4906-9f7e-63a87e2da909);

// Scrolls: E
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Enlarge_7c4c3ae1-26ac-4765-a5d5-586976e0e458);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ExpeditiousRetreat_eedf0539-6a47-480e-8b23-a133b222241f);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Eyebite_cecb1802-b2c0-4d65-aa08-aa15ca3619eb);

// Scrolls: F
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FalseLife_7d76665a-3b9e-4495-a3c6-a05340704194);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Fear_4cdb2434-0ffa-4fb1-9c42-d6451978f35b);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FeatherFall_82cbfcd2-cf80-4acd-9f1f-51835693b0e6);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FeignDeath_6e13fbf8-3db5-4420-8691-653d5ecb753e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FindFamiliar_fb975b01-40d5-49a3-b60a-d2f13a1f8009);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Fireball_79d2bb95-53fc-4e41-a004-5e1b83db8de7);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FireBolt_fdfe5d75-0e8b-47f8-b128-d57081cb8981);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FireShield_Chill_DONOTUSE_5d2e1c40-e85e-4027-aefe-b9731a2de2c9);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FireShield_Warm_6b87f7b4-441c-41cf-92c3-29e258747454);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FlameBlade_a6d216e9-c9e9-4310-b155-0e4f50682377);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FlamingSphere_0922de82-149f-4cac-aa98-e26222fd7714);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FleshToStone_a9135751-3a8a-4070-9f3a-11d24d123a3f);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Fly_1df15994-c860-4930-beed-3135b74025fa);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FogCloud_dcb51bec-90bd-4d0a-942d-72034782bdf5);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_FreezingSphere_74d0e4f0-de97-4097-a7e7-f5759a375c81);

// Scrolls: G
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_GaseousForm_4c026e53-4000-4818-913c-a5662ee7c061);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_GlobeOfInvulnerability_8d4c06d1-e504-49b0-a4fa-5179ab717f1e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_GlyphOfWarding_056f10e1-01e7-4622-907f-faad8d48bbe6);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Goodberry_dff353d0-c1d4-43af-8664-bf08a9ffae07);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Grease_094c9b7f-0b7d-4813-92ea-7267afb62b07);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_GustOfWind_6bedf433-994f-4624-bb2a-cdf6f46d539a);

// Scrolls: H
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Haste_96d4aba5-bd76-4bae-a726-37a6c96776ab);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_HideousLaughter_8bc1a0d8-af28-45b2-b1ca-1f15e3c47b1b);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_HoldMonster_d621c19f-d5c8-433c-bc75-7f2eb87d2f0a);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_HoldPerson_5e077657-8b5e-4e69-ae2e-95eab691fa41);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_HypnoticPattern_bdf15fb0-d9df-4509-ad70-42b5fad11971);

// Scrolls: I-L
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_IceKnife_f26320fa-9a25-4f79-80fc-e356268cf474);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_IceStorm_e8c3ad4e-37f0-46c8-bf25-0ddc2dcb0139);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Invisibility_6ed22182-90a6-418a-8aa7-909b9e77aa47);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Invisibility_Greater_795e4282-27c3-4177-b532-9e6559a26531);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_IrresistibleDance_3c8db4fb-c10b-415d-b9cd-c3254265b778);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Jump_e1f15103-bb95-476f-8b09-091f51b2f645);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Knock_4c1a886a-7db5-4e00-bbc6-d4243534f057);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_LightningBolt_83600284-8f78-409f-a0e0-d262b2bdea64);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Longstrider_82370a33-5243-4fad-9880-b0a8c2b5a225);

// Scrolls: M
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_MageArmor_2ccab07d-0ccb-45e6-8f43-8ffb6a62da11);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_MagicMissile_945cd4f0-991b-4663-b72e-790d49fee27e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_MagicWeapon_ccf1bd99-e807-44e6-9a0a-7645ad533a8f);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_MirrorImage_019d8804-56ee-44eb-959a-db5377cda8ae);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_MistyStep_9a2a3fcc-d948-4463-b88b-a9d61b77b015);

// Scrolls: P
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_PhantasmalForce_2eb2147d-5bcb-4b0e-ac73-b2a4d1deeb77);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_PhantasmalKiller_3b802734-ad6e-45a4-988b-f7241636e5e9);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_PlanarBinding_6ac3b9ab-fdb4-47e8-8a35-91747de2afc8);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Polymorph_389da9ab-bee7-447c-9bed-f1021ddc94d4);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ProtectionFromEnergy_9f8502bf-727f-40c7-93a3-5fab6ba2e2f5);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ProtectionFromEvilAndGood_03771ebc-83ca-45d2-8bd5-d382b6d6d824);

// Scrolls: R
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_RayOfEnfeeblement_cd1da9c5-c9ea-4d2a-93ce-e201c97eded9);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_RayOfFrost_f6cbfbb3-7eab-4f78-afde-073756c4e26d);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_RayOfSickness_22ef638a-206f-4874-8f68-e2a378df1158);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_RemoveCurse_dea31400-25e5-4e69-bb76-14430fe46673);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ResilientSphere_f5bf39c0-2df3-4cd4-842c-c1862e6f80aa);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Revivify_c1c3e4fb-d68c-4e10-afdc-d4550238d50e);

// Scrolls: S
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ScorchingRay_577a83c9-0bb7-4670-b0e9-d9a4738f6a0a);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_SeeInvisibility_2e7fc397-cb84-4573-b6c7-1c7a8f2742d6);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Seeming_d2573c9b-6de2-45bd-8032-b8a59432f4b5);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Shatter_2ad118cb-b11f-45ca-a206-7575bbbaccc6);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_ShockingGrasp_a9ced623-a25d-4d2b-bca5-644b7230c869);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Sleep_2ce88bf0-fe06-46bd-b71e-18bc6dc8eb9d);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_SleetStorm_be05f7d0-ffa0-46e3-a0d6-66e3333159f1);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Slow_4c990ca3-01f6-4536-b8f3-c26cd9a0ca8b);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_SpeakWithDead_36d01b98-1702-4d00-81a9-1b8469dd67a5);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_StinkingCloud_0f0a7a12-1c77-423a-b16e-4a9a5480c05e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Stoneskin_7f39977f-bcab-4dda-933f-bd70cb333ecc);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_SummonQuasit_f912ea9b-0e2f-45b4-b12d-fa6ec89dc758);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Sunbeam_049d70c4-7ea3-4b6c-af6f-44dab7813a89);

// Scrolls: T
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Telekinesis_1d5ecaca-310b-4622-b302-81331c0a8e9e);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Thunderwave_94caa680-50b8-46b1-b775-19150d783b2f);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_TrueResurrection_01d1b2b2-9e6b-4ad2-8d63-59f9caf1d389);

// Scrolls: V-W
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_VampiricTouch_6fd2d3d4-801c-4591-9c05-db8a68e51808);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_WallOfFire_0f3c7369-d0bd-4b97-960d-1407f4c8eebf);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_WallOfIce_e7dc56bc-b169-4a46-b8ee-cc6474dd7b15);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_WallOfStone_d13587f4-a1f4-4833-bd1e-da1c7951d680);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_Web_2eedb4ac-47fa-4039-9684-8b4bb0923a26);
DB_XR_TemplatesToRecreate((ITEMROOT)LOOT_SCROLL_WitchBolt_e69f52a4-3d86-4f08-a9b4-c70ba4cc3070);
*/
KBSECTION
//REGION Queries

//Not turn based
QRY
QRY_ExplorationMode((CHARACTER)_Char)
AND
NOT DB_Is_InCombat(_Char, _)
AND
IsInForceTurnBasedMode(_Char, 0)
THEN
DB_NOOP(1);

// In range and does not have any conditions preventing opportunity attacks
QRY
QRY_CanBeOpportunityAttacked((CHARACTER)_Char)
AND
NOT QRY_ExplorationMode(_Char)
AND
HasAppliedStatus(_Char, "FLANKED_AOO", 1)
AND
NOT HasAppliedStatusWithGroup(_Char, "SG_Ignore_AOO", 1)
THEN
DB_NOOP(1);

//END_REGION

//REGION
//Remove focus spell statuses - refocusing should take at least 10 in-game minutes.
//This should make it so that prebuffing out of combat has the appropriate resource cost.
IF
ShortRested(_Char)
AND
DB_PartyMembers(_Char)
AND
DB_ClearStatusOnShortRest((STRING)_Status)
AND
HasAppliedStatus(_Char,_Status,1)
THEN
RemoveStatus(_Char,_Status);

//Regenerate scrolls on level reload (script by XiphiasRex)
/*IF
LevelGameplayStarted(_, _)
AND
DB_XR_TemplatesToRecreate(_Template)
AND
DB_Players(_Player)
AND
TemplateIsInUserInventory(_Template, _Player, _ExistingAmount, 0)
AND
ConcatenateGUID("XR_CreateItems_", _Player, _EndEvent)
THEN
DB_XR_ToCreate(_EndEvent, _Player, _Template, _ExistingAmount);
IterateInventoryByTemplate(_Player, _Template, "XR_RemoveItem", _EndEvent);

IF
EntityEvent((ITEM)_Item, "XR_RemoveItem")
THEN
RequestDelete(_Item);

IF
EntityEvent(_, _EndEvent)
AND
DB_XR_ToCreate(_EndEvent, _Player, _Template, _ExistingAmount)
THEN
TemplateAddTo(_Template, _Player, _ExistingAmount, 0);
NOT DB_XR_ToCreate(_EndEvent, _Player, _Template, _ExistingAmount);
*/
//END_REGION

//REGION Implements an aura that prevents Frightened reducing past 1

IF
StatusRemoved((GUIDSTRING)_Character, "FRIGHTENED", (GUIDSTRING)_Causee, _)
AND
HasActiveStatus(_Character, "FEAR_LOCK", 1)
THEN
ApplyStatus(_Character, "FRIGHTENED", 6.0, 0, _Causee);

//END_REGION

//REGION This Proc simplifies the process of requesting a skill check via a status effect
// In order to have Osiris skill checks support -10/+10 crits, we can't use RequestPassiveRoll.
// Instead, we can use the duration of a hidden status to set the DC. This Proc takes some of
// labour out of that process. Look at TRICK_MAGIC_ITEM_CHECK to see how to set up the skill
// check status. Reference string can be anything, it just serves to support the timer call.
// N.B. This will fail if one tries to make multiple uses concurrently on the same character.
PROC
PROC_RequestSkillCheckStatus((STRING)_CheckStatus, (INTEGER)_DC, (CHARACTER)_Character, (STRING)_ReferenceString)
AND
IntegerProduct(_DC, 6, (INTEGER)_DCConvertInt)
AND
IntegerToReal(_DCConvertInt, (REAL)_DCConvertReal)
THEN
ApplyStatus(_Character, "SKILL_CHECK_DC", _DCConvertReal, 1);
DB_SkillCheckTimerData(_Character, _CheckStatus, _ReferenceString);
TimerLaunch(_ReferenceString, 15);

IF
TimerFinished((STRING)_ReferenceString)
AND
DB_SkillCheckTimerData((CHARACTER)_Character, (STRING)_Status, _ReferenceString)
THEN
ApplyStatus(_Character, _Status, 0.0, 0, _Character);
NOT DB_SkillCheckTimerData(_Character, _Status, _ReferenceString);
EXITSECTION

ENDEXITSECTION
